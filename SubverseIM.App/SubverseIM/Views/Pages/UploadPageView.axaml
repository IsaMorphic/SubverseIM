<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:SubverseIM.ViewModels.Pages"
			 xmlns:cv="using:SubverseIM.Converters"
			 mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
			 x:Class="SubverseIM.Views.Pages.UploadPageView"
			 x:DataType="vm:UploadPageViewModel">
	<UserControl.Resources>
		<cv:FileSizeConverter x:Key="FileSizeConverter" />
	</UserControl.Resources>
	<Design.DataContext>
		<vm:UploadPageViewModel />
	</Design.DataContext>
	<DockPanel>
		<Button DockPanel.Dock="Bottom" Command="{Binding CancelCommand}" HorizontalAlignment="Stretch">
			<TextBlock FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Center">Skip upload (only use BitTorrent)</TextBlock>
		</Button>
		<Button DockPanel.Dock="Bottom" Command="{Binding UploadCommand}" HorizontalAlignment="Stretch" IsEnabled="{Binding CanUpload}">
			<TextBlock FontSize="16" VerticalAlignment="Center" HorizontalAlignment="Center">Upload to selected</TextBlock>
		</Button>
		<Panel>
			<ListBox x:Name="uploadListBox" ItemsSource="{Binding UploadTasks}">
				<ListBox.Styles>
					<Style Selector="ListBoxItem">
						<Setter Property="Focusable" Value="False" />
					</Style>
				</ListBox.Styles>
				<ListBox.ItemTemplate>
					<DataTemplate>
						<DockPanel>
							<TextBlock DockPanel.Dock="Top" FontWeight="Bold" Text="{Binding StoreDetails.HostAddress}" TextWrapping="Wrap" />
							<TextBlock DockPanel.Dock="Top" 
								Text="{Binding StoreDetails.FileSizeLimit, Converter={StaticResource FileSizeConverter}, ConverterParameter='Size limit: '}" />
							<TextBlock DockPanel.Dock="Left" VerticalAlignment="Center" Text="{Binding UploadProgress, StringFormat=##0\\%}" />
							<ProgressBar Value="{Binding UploadProgress}" Margin="5" MinWidth="0" />
						</DockPanel>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
			<TextBlock IsVisible="{Binding !UploadTasks.Count}"
					   HorizontalAlignment="Center"
					   VerticalAlignment="Center"
					   TextWrapping="Wrap"
					   TextAlignment="Center"
					   Margin="5" FontSize="16">
				No currently configured bootstrappers support file uploads.
			</TextBlock>
		</Panel>
	</DockPanel>
</UserControl>
